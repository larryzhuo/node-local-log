# 快速开始指南

## 🚀 立即开始

### 1. 启动服务器

```bash

# 方法2: 直接使用npm
npm install
npm start
```

### 2. 访问应用

打开浏览器访问: **http://localhost:3000**

### 3. 登录系统

使用默认凭据登录：
- **用户名**: `admin`
- **密码**: `admin123`

## 📁 添加你的日志文件

1. 将你的JSON格式日志文件放入 `logs/` 目录
2. 刷新页面或点击刷新按钮
3. 在左侧文件浏览器中点击你的日志文件

## 📝 日志格式要求

每行一个JSON对象，支持以下字段：

```json
{
  "level": "info|error|warn|debug",
  "message": "日志消息内容",
  "timestamp": "时间戳",
  "method": "HTTP方法",
  "url": "请求URL",
  "reqId": "请求ID",
  "pid": "进程ID",
  "startTime": "开始时间"
}
```

## 🚨 告警功能配置

### 1. 启用告警

1. 登录系统后，点击右上角的"告警配置"按钮
2. 勾选"启用告警功能"
3. 输入告警Webhook URL（支持HTTP/HTTPS）
4. 配置其他参数：
   - **检查间隔**: 监控检查频率（建议60秒以上）
   - **告警阈值**: 触发告警的错误数量
   - **冷却时间**: 防止告警风暴的间隔时间

### 2. 测试告警

1. 在告警配置界面点击"测试告警"按钮
2. 检查你的Webhook端点是否收到测试消息
3. 确认告警功能正常工作

### 3. 告警数据格式

告警将以POST请求发送到你的Webhook URL，数据格式：

```json
{
  "timestamp": "2025-08-25T06:03:18.998Z",
  "alertType": "error_log_detected",
  "errorCount": 2,
  "errors": [
    {
      "file": "app.log",
      "lineNumber": 15,
      "message": "Database connection failed",
      "timestamp": "2025-08-13 09:35:52,000",
      "url": "/api/users",
      "method": "POST"
    }
  ],
  "summary": "检测到 2 个错误日志"
}
```

## 🔧 自定义配置

### 环境变量配置

创建 `.env` 文件（参考 `config.example`）：

```bash
# 复制配置文件
cp config.example .env

# 编辑配置
nano .env
```

### 主要配置项

- `STATIC_ROOT`: 日志文件根目录
- `USERNAME`: 登录用户名
- `PASSWORD`: 登录密码
- `JWT_SECRET`: JWT密钥
- `PORT`: 服务器端口
- `ALERT_ENABLED`: 是否启用告警功能
- `ALERT_URL`: 告警Webhook URL
- `ALERT_INTERVAL`: 检查间隔（毫秒）
- `ALERT_THRESHOLD`: 告警阈值
- `ALERT_COOLDOWN`: 冷却时间（毫秒）

## 🎯 主要功能

### 文件浏览
- 左侧文件浏览器支持目录导航
- 支持返回上级目录
- 显示文件大小和修改时间

### 日志查看
- 表格形式显示日志内容
- 支持按级别过滤（info、error、warn、debug）
- 显示行号、时间、方法、URL等信息

### 搜索功能
- 支持关键词搜索
- 实时过滤日志内容
- 支持清除搜索条件

### 分页浏览
- 支持自定义每页显示数量
- 支持上一页/下一页导航
- 显示当前页码和总页数

### 详情查看
- 点击"详情"按钮查看完整日志行
- 模态框显示原始JSON数据

### 错误监控
- 实时监控error级别日志
- 自动发送告警通知
- 支持自定义告警参数
- 防止告警风暴的冷却机制

## 🔒 安全特性

- JWT令牌认证
- 路径遍历防护
- 请求频率限制
- 输入验证和过滤
- 告警冷却机制

## 🐛 故障排除

### 服务器无法启动
1. 检查Node.js版本（需要12.0+）
2. 检查端口3000是否被占用
3. 检查日志目录权限

### 无法访问日志文件
1. 确认日志文件在指定目录内
2. 检查文件权限
3. 确认文件格式正确

### 登录失败
1. 检查用户名密码是否正确
2. 确认JWT配置正确
3. 检查浏览器控制台错误信息

### 告警功能问题
1. 确认Webhook URL可访问
2. 检查网络连接
3. 验证URL格式正确
4. 查看服务器控制台日志

## 📞 获取帮助

如果遇到问题，请检查：
1. 浏览器开发者工具的控制台
2. 服务器终端输出
3. 项目README.md文档
4. 告警配置界面中的状态信息

## 🎉 开始使用

现在你可以：
1. 启动服务器
2. 登录系统
3. 浏览你的日志文件
4. 使用搜索和分页功能
5. 查看日志详情
6. 配置错误监控和告警
7. 测试告警功能

享受你的日志查看和监控体验！ 🚀
